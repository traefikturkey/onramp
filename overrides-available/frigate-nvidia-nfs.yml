volumes:
  frigate-nvidia-nfs-media:
    labels:
      - remove_volume_on=down
    driver_opts:
      type: nfs
      o: "addr=${FRIGATE_NVIDIA_NFS_SERVER:-${NFS_SERVER}},nolock,noatime,soft,rw"
      device: ":${FRIGATE_NVIDIA_NFS_SERVER_PATH:-${NFS_MEDIA_PATH}}"

services:
  frigate-nvidia:
    volumes:
      - ${FRIGATE_CONFIG_VOLUME:-./etc/frigate}:/config
      - ${FRIGATE_MEDIA_VOLUME:-frigate-nvidia-nfs-media}:/media/frigate
      - /etc/localtime:/etc/localtime:ro
      - type: tmpfs
        target: /tmp/cache
        tmpfs:
          size: 1000000000
