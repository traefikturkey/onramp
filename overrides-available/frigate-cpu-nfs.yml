volumes:
  frigate-cpu-nfs-media:
    labels:
      - remove_volume_on=down
    driver_opts:
      type: nfs
      o: "addr=${FRIGATE_CPU_NFS_SERVER:-${NFS_SERVER}},nolock,noatime,soft,rw"
      device: ":${FRIGATE_CPU_NFS_SERVER_PATH:-${NFS_MEDIA_PATH}}"

services:
  frigate-cpu:
    volumes:
      # config must stay local for performance
      - ${FRIGATE_CONFIG_VOLUME:-./etc/frigate}:/config
      - ${FRIGATE_MEDIA_VOLUME:-frigate-cpu-nfs-media}:/media/frigate
      - /etc/localtime:/etc/localtime:ro
      - type: tmpfs
        target: /tmp/cache
        tmpfs:
          size: 1000000000
