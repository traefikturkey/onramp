# Rollback override for spacebin
# This restores the dedicated postgres container
# Usage: make enable-override spacebin-dedicated-postgres

networks:
  traefik:
    external: true

services:
  spacebin:
    environment:
      - SPIRIT_CONNECTION_URI=postgres://${SPACEBIN_POSTGRES_USER:-spacebin}:${SPACEBIN_POSTGRES_PASSWORD:-password}@spacebin-db:5432/spacebin?sslmode=disable

  spacebin-db:
    image: postgres:16.3-alpine
    container_name: spacebin-db
    restart: ${SPACEBIN_RESTART:-unless-stopped}
    networks:
      - traefik
    environment:
      - POSTGRES_USER=${SPACEBIN_POSTGRES_USER:-spacebin}
      - POSTGRES_PASSWORD=${SPACEBIN_POSTGRES_PASSWORD:-password}
      - POSTGRES_DB=${SPACEBIN_POSTGRES_DB:-spacebin}
    volumes:
      - ./etc/spacebin/db:/var/lib/postgresql/data
