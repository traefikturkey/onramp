volumes:
  joplin-api-nfs-data:
    labels:
      - remove_volume_on=down
    driver_opts:
      type: nfs
      o: "addr=${JOPLIN_API_NFS_SERVER:-${NFS_SERVER}},nolock,noatime,soft,rw"
      device: ":${JOPLIN_API_NFS_SERVER_PATH:-${NFS_MEDIA_PATH}}"

services:
  joplin-api:
    volumes:
      # Config stays local (contains sync credentials)
      - ./etc/joplin-api/config:/root/joplin
      # Data on NFS
      - ${JOPLIN_API_DATA_VOLUME:-joplin-api-nfs-data}:/root/.config/joplin
